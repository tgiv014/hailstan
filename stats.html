<html>
<head>
	<link rel="stylesheet" type="text/css" href="/styles.css">
</head>
<body>
	<div id="cover">
		<div id="loader">
     		<h1>Hold up</h1>
    		<img id="spinner" src="/load.gif">
    		<h3>Connecting<span id="extra">...</span></h3>
		</div>
	</div>
	<canvas id="myChart" width="400" height="400"></canvas>
	<a href="http://nodejs.org/"><img id="logo" src="http://nodejs.org/images/logos/nodejs-black.png"></a>
	<script src="/socket.io/socket.io.js"></script>
	<script src="//code.jquery.com/jquery-1.10.2.min.js"></script>
	<script src="//raw.github.com/nnnick/Chart.js/master/Chart.min.js"></script>
	<script>
		$(window).load(function(){
			var socket = io.connect('http://hailstan.com');
			jQuery.fn.center = function () {
				this.css("position", "absolute");
				this.css("top", Math.max(0, (($(window).height() - $(this).outerHeight()) / 2) + $(window).scrollTop()) + "px");
				this.css("left", Math.max(0, (($(window).width() - $(this).outerWidth()) / 2) + $(window).scrollLeft()) + "px");
				return this;
			}

			//Get context with jQuery - using jQuery's .get() method.
			var ctx = $("#myChart").get(0).getContext("2d");
			//This will get the first returned node in the jQuery collection.
			var pie = new Chart(ctx);

			$('#loader').center();
			$(window).resize(function () {
				$('#loader').center();
			});
			setTimeout(function() {
				$('#extra').text('... Damn it.')
				$('#loader').center();
			}, 10000);
			socket.on('connect',function(){
				socket.emit('getdata', { hey: 'yo'});
			});
			socket.on('data', function (data) {
				pie.Pie(data);
			});
		});
</script>
</body>
<html>